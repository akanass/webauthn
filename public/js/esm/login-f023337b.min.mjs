const e=document.querySelector("#login"),n=document.querySelector("#error-login"),t=document.querySelector("#error-login-message"),s=document.querySelector("#error-webauthn-message"),o=document.querySelector("#webauthn-redirect"),i=document.querySelector("#loginButton");let r;window.addEventListener("load",(()=>{l(),a(),d()}));const l=()=>{n.style.display="none",t.style.display="none",t.innerText="",s.style.display="none"},a=()=>{e.addEventListener("submit",(o=>{o.preventDefault(),l(),i.disabled=!0;const a=e.elements.username.value.toLowerCase(),d=e.elements.password.value;r&&r.unsubscribe(),import("./_api-4237f916.min.mjs").then((({api:e})=>{r=e.login(a,d).subscribe((e=>{r.unsubscribe(),e.skipAuthenticatorRegistration?window.location.href="/end":window.location.href="/login/authenticator"}),(e=>{const o=[].concat(e.response.message).shift();var r;r=o,n.style.display="flex",t.style.display="inline",t.innerText=r,s.style.display="none",setTimeout((()=>i.disabled=!1),500)}))}))}))},d=()=>{o.addEventListener("click",(e=>{e.preventDefault(),l(),import("./_webauthn-dd6c3eb9.min.mjs").then((({webAuthn:e})=>{e.supported?window.location.href=o.href:(n.style.display="flex",t.style.display="none",t.innerText="",s.style.display="inline")}))}))};
