import{m as e}from"./mergeMap-e9e2eaae.min.mjs";import"./tslib.es6-ba244ae5.min.mjs";import"./map-d5847e52.min.mjs";const t=document.querySelector("#error-login-authenticator"),n=document.querySelector("#error-login-authenticator-message"),i=document.querySelector("#error-webauthn-message"),s=document.querySelector("#button-icon"),r=document.querySelector("#button-label"),o=document.querySelector("#start-enrollment"),a=document.querySelector("#stop-enrollment");let l,d;window.addEventListener("load",(()=>{c(),u(),p(),b()}));const c=()=>{t.style.display="none",n.style.display="none",n.innerText="",i.style.display="none"},u=()=>{s.innerText="fingerprint",r.innerText="Start Enrollment"},m=()=>{s.innerText="exit_to_app",r.innerText="Skip Enrollment"},p=()=>{a.addEventListener("click",(()=>{c(),a.checked?m():u()}))},b=()=>{o.addEventListener("click",(()=>{c(),o.disabled=!0,a.disabled=!0,l&&l.unsubscribe(),d&&d.unsubscribe(),a.checked?import("./_api-4237f916.min.mjs").then((({api:t})=>{l=t.loggedIn().pipe(e((e=>t.patchUser(e.userId,{skip_authenticator_registration:!0})))).subscribe((()=>{l.unsubscribe(),window.location.href="/end"}),(e=>y(e,l)))})):import("./_webauthn-dd6c3eb9.min.mjs").then((({webAuthn:e})=>{e.supported?import("./_api-4237f916.min.mjs").then((({api:e})=>{d=e.patchSession({key:"previous_step",value:"login_authenticator"}).subscribe((()=>{d.unsubscribe(),window.location.href="/webauthn/authenticator"}),(e=>y(e,d)))})):(t.style.display="flex",n.style.display="none",n.innerText="",i.style.display="inline",setTimeout((()=>(m(),o.disabled=!1,void(a.checked=!0))),500))}))}))},y=(e,s)=>{if(401===e.status)s&&s.unsubscribe(),window.location.href="/error";else{const s=[].concat(e.message).shift();r=s,t.style.display="flex",n.style.display="inline",n.innerText=r,i.style.display="none",setTimeout((()=>(o.disabled=!1,void(a.disabled=!1))),500)}var r};
