import{m as e}from"./mergeMap-60d3c692.min.mjs";import"./tslib.es6-470a695b.min.mjs";import"./map-389a4212.min.mjs";const t=document.querySelector("#error-login-authenticator"),n=document.querySelector("#error-login-authenticator-message"),i=document.querySelector("#error-webauthn-message"),s=document.querySelector("#button-icon"),r=document.querySelector("#button-label"),o=document.querySelector("#start-enrollment"),l=document.querySelector("#stop-enrollment");let a,c;window.addEventListener("load",(()=>{d(),u(),p(),b()}));const d=()=>{t.style.display="none",n.style.display="none",n.innerText="",i.style.display="none"},u=()=>{s.innerText="fingerprint",r.innerText="Start Enrollment"},m=()=>{s.innerText="exit_to_app",r.innerText="Skip Enrollment"},p=()=>{l.addEventListener("click",(()=>{d(),l.checked?m():u()}))},b=()=>{o.addEventListener("click",(()=>{d(),o.disabled=!0,l.disabled=!0,a&&a.unsubscribe(),c&&c.unsubscribe(),l.checked?import("./_api-8810f469.min.mjs").then((({api:t})=>{a=t.loggedIn().pipe(e((e=>t.patchUser(e.userId,{skip_authenticator_registration:!0})))).subscribe((()=>{a.unsubscribe(),window.location.href="/end"}),(e=>y(e,a)))})):import("./_webauthn-3c9ffdf1.min.mjs").then((({webAuthn:e})=>{e.supported?import("./_api-8810f469.min.mjs").then((({api:e})=>{c=e.patchSession({key:"previous_step",value:"login_authenticator"}).subscribe((()=>{c.unsubscribe(),window.location.href="/webauthn/authenticator"}),(e=>y(e,c)))})):(t.style.display="flex",n.style.display="none",n.innerText="",i.style.display="inline",setTimeout((()=>(m(),o.disabled=!1,void(l.checked=!0))),500))}))}))},y=(e,s)=>{if(401===e.status)s&&s.unsubscribe(),window.location.href="/error";else{const s=[].concat(e.message).shift();r=s,t.style.display="flex",n.style.display="inline",n.innerText=r,i.style.display="none",setTimeout((()=>(o.disabled=!1,void(l.disabled=!1))),500)}var r};
