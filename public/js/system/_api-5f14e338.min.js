System.register(["./_credential-f2e9a1c1.min.js","./tslib.es6-4c758cbf.min.js","./Observable-a79d76be.min.js","./map-ecca50c7.min.js"],(function(e){"use strict";var t,r,s,n,i;return{setters:[function(e){t=e.C},function(e){r=e._},function(e){s=e.O,n=e.S},function(e){i=e.m}],execute:function(){var o="undefined"!=typeof window&&window,a="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,u="undefined"!=typeof global&&global,p=o||u||a;function c(e,t){return void 0===t&&(t=null),new m({method:"GET",url:e,headers:t})}function h(e,t,r){return new m({method:"POST",url:e,body:t,headers:r})}function d(e,t){return new m({method:"DELETE",url:e,headers:t})}function l(e,t,r){return new m({method:"PUT",url:e,body:t,headers:r})}function y(e,t,r){return new m({method:"PATCH",url:e,body:t,headers:r})}var f=i((function(e,t){return e.response}));function b(e,t){return f(new m({method:"GET",url:e,responseType:"json",headers:t}))}var m=function(e){function t(t){var r=e.call(this)||this,s={async:!0,createXHR:function(){return this.crossDomain?function(){if(p.XMLHttpRequest)return new p.XMLHttpRequest;if(p.XDomainRequest)return new p.XDomainRequest;throw new Error("CORS is not supported by your browser")}():function(){if(p.XMLHttpRequest)return new p.XMLHttpRequest;var e=void 0;try{for(var t=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],r=0;r<3;r++)try{if(e=t[r],new p.ActiveXObject(e))break}catch(e){}return new p.ActiveXObject(e)}catch(e){throw new Error("XMLHttpRequest is not supported by your browser")}}()},crossDomain:!0,withCredentials:!1,headers:{},method:"GET",responseType:"json",timeout:0};if("string"==typeof t)s.url=t;else for(var n in t)t.hasOwnProperty(n)&&(s[n]=t[n]);return r.request=s,r}var s;return r(t,e),t.prototype._subscribe=function(e){return new w(e,this.request)},t.create=((s=function(e){return new t(e)}).get=c,s.post=h,s.delete=d,s.put=l,s.patch=y,s.getJSON=b,s),t}(s),w=function(e){function t(t,r){var s=e.call(this,t)||this;s.request=r,s.done=!1;var n=r.headers=r.headers||{};return r.crossDomain||s.getHeader(n,"X-Requested-With")||(n["X-Requested-With"]="XMLHttpRequest"),s.getHeader(n,"Content-Type")||p.FormData&&r.body instanceof p.FormData||void 0===r.body||(n["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8"),r.body=s.serializeBody(r.body,s.getHeader(r.headers,"Content-Type")),s.send(),s}return r(t,e),t.prototype.next=function(e){this.done=!0;var t,r=this,s=r.xhr,n=r.request,i=r.destination;try{t=new T(e,s,n)}catch(e){return i.error(e)}i.next(t)},t.prototype.send=function(){var e=this.request,t=this.request,r=t.user,s=t.method,n=t.url,i=t.async,o=t.password,a=t.headers,u=t.body;try{var p=this.xhr=e.createXHR();this.setupEvents(p,e),r?p.open(s,n,i,r,o):p.open(s,n,i),i&&(p.timeout=e.timeout,p.responseType=e.responseType),"withCredentials"in p&&(p.withCredentials=!!e.withCredentials),this.setHeaders(p,a),u?p.send(u):p.send()}catch(e){this.error(e)}},t.prototype.serializeBody=function(e,t){if(!e||"string"==typeof e)return e;if(p.FormData&&e instanceof p.FormData)return e;if(t){var r=t.indexOf(";");-1!==r&&(t=t.substring(0,r))}switch(t){case"application/x-www-form-urlencoded":return Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&");case"application/json":return JSON.stringify(e);default:return e}},t.prototype.setHeaders=function(e,t){for(var r in t)t.hasOwnProperty(r)&&e.setRequestHeader(r,t[r])},t.prototype.getHeader=function(e,t){for(var r in e)if(r.toLowerCase()===t.toLowerCase())return e[r]},t.prototype.setupEvents=function(e,t){var r=t.progressSubscriber;function s(e){var t,r=s,n=r.subscriber,i=r.progressSubscriber,o=r.request;i&&i.error(e);try{t=new S(this,o)}catch(e){t=e}n.error(t)}if(e.ontimeout=s,s.request=t,s.subscriber=this,s.progressSubscriber=r,e.upload&&"withCredentials"in e){var n,i;if(r)n=function(e){n.progressSubscriber.next(e)},p.XDomainRequest?e.onprogress=n:e.upload.onprogress=n,n.progressSubscriber=r;i=function(e){var t,r=i,s=r.progressSubscriber,n=r.subscriber,o=r.request;s&&s.error(e);try{t=new g("ajax error",this,o)}catch(e){t=e}n.error(t)},e.onerror=i,i.request=t,i.subscriber=this,i.progressSubscriber=r}function o(e){}function a(e){var t=a,r=t.subscriber,s=t.progressSubscriber,n=t.request;if(4===this.readyState){var i=1223===this.status?204:this.status,o="text"===this.responseType?this.response||this.responseText:this.response;if(0===i&&(i=o?200:0),i<400)s&&s.complete(),r.next(e),r.complete();else{s&&s.error(e);var u=void 0;try{u=new g("ajax error "+i,this,n)}catch(e){u=e}r.error(u)}}}e.onreadystatechange=o,o.subscriber=this,o.progressSubscriber=r,o.request=t,e.onload=a,a.subscriber=this,a.progressSubscriber=r,a.request=t},t.prototype.unsubscribe=function(){var t=this.done,r=this.xhr;!t&&r&&4!==r.readyState&&"function"==typeof r.abort&&r.abort(),e.prototype.unsubscribe.call(this)},t}(n),T=function(){return function(e,t,r){this.originalEvent=e,this.xhr=t,this.request=r,this.status=t.status,this.responseType=t.responseType||r.responseType,this.response=v(this.responseType,t)}}(),g=function(){function e(e,t,r){return Error.call(this),this.message=e,this.name="AjaxError",this.xhr=t,this.request=r,this.status=t.status,this.responseType=t.responseType||r.responseType,this.response=v(this.responseType,t),this}return e.prototype=Object.create(Error.prototype),e}();function v(e,t){switch(e){case"json":return function(e){return"response"in e?e.responseType?e.response:JSON.parse(e.response||e.responseText||"null"):JSON.parse(e.responseText||"null")}(t);case"xml":return t.responseXML;case"text":default:return"response"in t?t.response:t.responseText}}var S=function(e,t){return g.call(this,"ajax timeout",e,t),this.name="AjaxTimeoutError",this},C=function(){return m.create}();class j{constructor(e){Object.assign(this,e)}get userId(){return this.id}get userName(){return this.username}get displayName(){return this.display_name}get skipAuthenticatorRegistration(){return this.skip_authenticator_registration}get lastAccessTime(){return new Date(this.last_access_time).toString()}}class q{constructor(e){this.credentials=[],this.can_add_new_biometric=!0,this._securityKeys=[],this._biometrics=[],void 0!==e&&Object.assign(this,e),this.credentials.forEach((e=>"cross-platform"===e.metadata.authenticator_attachment?this.addSecurityKey(new t(e)):this.addBiometrics(new t(e))))}get securityKeys(){return this._securityKeys}get biometrics(){return this._biometrics}get addBiometricsButtonIsEnabled(){return this.can_add_new_biometric}addSecurityKey(e){this._securityKeys=this._securityKeys.concat(e)}addBiometrics(e){this._biometrics=this._biometrics.concat(e)}}class x{constructor(){}static instance(){return x._instance instanceof x||(x._instance=new x),x._instance}login(e,t){return C({url:"/api/login",method:"POST",headers:{"Content-Type":"application/json"},body:{username:e,password:t}}).pipe(i((e=>new j(e.response))))}loggedIn(){return C({url:"/api/logged-in",method:"GET"}).pipe(i((e=>new j(e.response))))}logout(){return C({url:"/api/delete-session",method:"DELETE"}).pipe(i((e=>e.response)))}patchUser(e,t){return C({url:`/api/users/${e}`,method:"PATCH",headers:{"Content-Type":"application/json"},body:t}).pipe(i((e=>new j(e.response))))}patchSession(e){return C({url:"/api/set-session-data",method:"PATCH",headers:{"Content-Type":"application/json"},body:e}).pipe(i((e=>e.response)))}cleanSession(e){return C({url:"/api/clean-session-data",method:"PATCH",headers:{"Content-Type":"application/json"},body:e}).pipe(i((e=>e.response)))}getCredentialsList(e){return C({url:`/api/users/${e}/credentials`,method:"GET"}).pipe(i((e=>new q(e.response))))}patchCredential(e,r,s){return C({url:`/api/users/${e}/credentials/${r}`,method:"PATCH",headers:{"Content-Type":"application/json"},body:s}).pipe(i((e=>new t(e.response))))}deleteCredential(e,t){return C({url:`/api/users/${e}/credentials/${t}`,method:"DELETE"}).pipe(i((e=>e.response)))}startAttestation(e){return C({url:"/api/webauthn/register/start",method:"POST",headers:{"Content-Type":"application/json"},body:e}).pipe(i((e=>e.response)))}verifyAttestation(e){return C({url:"/api/webauthn/register/finish",method:"POST",headers:{"Content-Type":"application/json"},body:e}).pipe(i((e=>new t(e.response))))}startAssertion(){return C({url:"/api/webauthn/verify/start",method:"GET"}).pipe(i((e=>e.response)))}verifyAssertion(e){return C({url:"/api/webauthn/verify/finish",method:"POST",headers:{"Content-Type":"application/json"},body:e}).pipe(i((e=>new j(e.response))))}}e("Api",x);e("api",x.instance())}}}));
