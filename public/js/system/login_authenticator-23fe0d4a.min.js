System.register(["./mergeMap-8576cad6.min.js","./tslib.es6-4c758cbf.min.js","./map-19a84fdd.min.js"],(function(e,t){"use strict";var n;return{setters:[function(e){n=e.m},function(){},function(){}],execute:function(){const e=document.querySelector("#error-login-authenticator"),i=document.querySelector("#error-login-authenticator-message"),s=document.querySelector("#error-webauthn-message"),r=document.querySelector("#button-icon"),o=document.querySelector("#button-label"),c=document.querySelector("#start-enrollment"),a=document.querySelector("#stop-enrollment");let l,u;window.addEventListener("load",(()=>{d(),p(),m(),y()}));const d=()=>{e.style.display="none",i.style.display="none",i.innerText="",s.style.display="none"},p=()=>{r.innerText="fingerprint",o.innerText="Start Enrollment"},b=()=>{r.innerText="exit_to_app",o.innerText="Skip Enrollment"},m=()=>{a.addEventListener("click",(()=>{d(),a.checked?b():p()}))},y=()=>{c.addEventListener("click",(()=>{d(),c.disabled=!0,a.disabled=!0,l&&l.unsubscribe(),u&&u.unsubscribe(),a.checked?t.import("./_api-b740ac8f.min.js").then((({api:e})=>{l=e.loggedIn().pipe(n((t=>e.patchUser(t.userId,{skip_authenticator_registration:!0})))).subscribe((()=>{l.unsubscribe(),window.location.href="/end"}),(e=>h(e,l)))})):t.import("./_webauthn-cdec9250.min.js").then((({webAuthn:n})=>{n.supported?t.import("./_api-b740ac8f.min.js").then((({api:e})=>{u=e.patchSession({key:"previous_step",value:"login_authenticator"}).subscribe((()=>{u.unsubscribe(),window.location.href="/webauthn/authenticator"}),(e=>h(e,u)))})):(e.style.display="flex",i.style.display="none",i.innerText="",s.style.display="inline",setTimeout((()=>(b(),c.disabled=!1,void(a.checked=!0))),500))}))}))},h=(t,n)=>{if(401===t.status)n&&n.unsubscribe(),window.location.href="/error";else{const n=[].concat(t.response.message).shift();r=n,e.style.display="flex",i.style.display="inline",i.innerText=r,s.style.display="none",setTimeout((()=>(c.disabled=!1,void(a.disabled=!1))),500)}var r}}}}));
