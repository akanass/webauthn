System.register(["./tslib.es6-dfa6593e.min.js","./map-83d0b89b.min.js"],(function(t,e){"use strict";var n,r,o,i,u,c,s,a;return{setters:[function(t){n=t.a},function(t){r=t.h,o=t.o,i=t.i,u=t.S,c=t.O,s=t.a,a=t.m}],execute:function(){function t(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var f=t(),d=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function l(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var p=function(t){if(t&&"function"==typeof t[o])return c=t,function(t){var e=c[o]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(d(t))return u=t,function(t){for(var e=0,n=u.length;e<n&&!t.closed;e++)t.next(u[e]);t.complete()};if(l(t))return n=t,function(t){return n.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,r),t};if(t&&"function"==typeof t[f])return e=t,function(t){for(var n=e[f]();;){var r=void 0;try{r=n.next()}catch(e){return t.error(e),t}if(r.done){t.complete();break}if(t.next(r.value),t.closed)break}return"function"==typeof n.return&&t.add((function(){n.return&&n.return()})),t};var e,n,u,c,s=i(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+s+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")},h=function(t){function e(e){var n=t.call(this)||this;return n.parent=e,n}return n(e,t),e.prototype._next=function(t){this.parent.notifyNext(t)},e.prototype._error=function(t){this.parent.notifyError(t),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},e}(u),y=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.notifyNext=function(t){this.destination.next(t)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(){this.destination.complete()},e}(u);function b(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[o]}(t))return function(t,e){return new c((function(n){var r=new s;return r.add(e.schedule((function(){var i=t[o]();r.add(i.subscribe({next:function(t){r.add(e.schedule((function(){return n.next(t)})))},error:function(t){r.add(e.schedule((function(){return n.error(t)})))},complete:function(){r.add(e.schedule((function(){return n.complete()})))}}))}))),r}))}(t,e);if(l(t))return function(t,e){return new c((function(n){var r=new s;return r.add(e.schedule((function(){return t.then((function(t){r.add(e.schedule((function(){n.next(t),r.add(e.schedule((function(){return n.complete()})))})))}),(function(t){r.add(e.schedule((function(){return n.error(t)})))}))}))),r}))}(t,e);if(d(t))return function(t,e){return new c((function(n){var r=new s,o=0;return r.add(e.schedule((function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}(t,e);if(function(t){return t&&"function"==typeof t[f]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new c((function(n){var r,o=new s;return o.add((function(){r&&"function"==typeof r.return&&r.return()})),o.add(e.schedule((function(){r=t[f](),o.add(e.schedule((function(){if(!n.closed){var t,e;try{var o=r.next();t=o.value,e=o.done}catch(t){return void n.error(t)}e?n.complete():(n.next(t),this.schedule())}})))}))),o}))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}function m(t,e,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof e?function(r){return r.pipe(m((function(n,r){return(o=t(n,r),i?b(o,i):o instanceof c?o:new c(p(o))).pipe(a((function(t,o){return e(n,t,r,o)})));var o,i}),n))}:("number"==typeof e&&(n=e),function(e){return e.lift(new v(t,n))})}var v=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new w(t,this.project,this.concurrent))},t}(),w=function(t){function e(e,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var o=t.call(this,e)||this;return o.project=n,o.concurrent=r,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return n(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e)},e.prototype._innerSub=function(t){var e=new h(this),n=this.destination;n.add(e);var r=function(t,e){if(!e.closed)return t instanceof c?t.subscribe(e):p(t)(e)}(t,e);r!==e&&n.add(r)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t){this.destination.next(t)},e.prototype.notifyComplete=function(){var t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(y);const x=document.querySelector("#error-login-authenticator"),_=document.querySelector("#error-login-authenticator-message"),S=document.querySelector("#error-webauthn-message"),I=document.querySelector("#button-icon"),T=document.querySelector("#button-label"),g=document.querySelector("#start-enrollment"),E=document.querySelector("#stop-enrollment");let N,j;window.addEventListener("load",(()=>{k(),q(),O(),P()}));const k=()=>{x.style.display="none",_.style.display="none",_.innerText="",S.style.display="none"},q=()=>{I.innerText="fingerprint",T.innerText="Start Enrollment"},C=()=>{I.innerText="exit_to_app",T.innerText="Skip Enrollment"},O=()=>{E.addEventListener("click",(()=>{k(),E.checked?C():q()}))},P=()=>{g.addEventListener("click",(()=>{k(),g.disabled=!0,E.disabled=!0,N&&N.unsubscribe(),j&&j.unsubscribe(),E.checked?e.import("./_api-a3bd28d4.min.js").then((({api:t})=>{N=t.loggedIn().pipe(m((e=>t.patchUser(e.userId,{skip_authenticator_registration:!0})))).subscribe((()=>{N.unsubscribe(),window.location.href="/end"}),(t=>Y(t,N)))})):e.import("./_webauthn-62022b65.min.js").then((({webAuthn:t})=>{t.supported?e.import("./_api-a3bd28d4.min.js").then((({api:t})=>{j=t.patchSession({key:"previous_step",value:"login_authenticator"}).subscribe((()=>{j.unsubscribe(),window.location.href="/webauthn/authenticator"}),(t=>Y(t,j)))})):(x.style.display="flex",_.style.display="none",_.innerText="",S.style.display="inline",setTimeout((()=>(C(),g.disabled=!1,void(E.checked=!0))),500))}))}))},Y=(t,e)=>{if(401===t.status)e&&e.unsubscribe(),window.location.href="/error";else{const e=[].concat(t.message).shift();n=e,x.style.display="flex",_.style.display="inline",_.innerText=n,S.style.display="none",setTimeout((()=>(g.disabled=!1,void(E.disabled=!1))),500)}var n}}}}));
