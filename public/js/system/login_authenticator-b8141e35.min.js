System.register(["./tslib.es6-2105f430.min.js","./map-2b82939b.min.js"],(function(e,t){"use strict";var n,r,o,i,u,c,s,a;return{setters:[function(e){n=e.a},function(e){r=e.h,o=e.o,i=e.i,u=e.S,c=e.O,s=e.a,a=e.m}],execute:function(){function e(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var f=e(),l=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function d(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var p=function(e){if(e&&"function"==typeof e[o])return c=e,function(e){var t=c[o]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(l(e))return u=e,function(e){for(var t=0,n=u.length;t<n&&!e.closed;t++)e.next(u[t]);e.complete()};if(d(e))return n=e,function(e){return n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,r),e};if(e&&"function"==typeof e[f])return t=e,function(e){for(var n=t[f]();;){var r=void 0;try{r=n.next()}catch(t){return e.error(t),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add((function(){n.return&&n.return()})),e};var t,n,u,c,s=i(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+s+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")},h=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,n}return n(t,e),t.prototype._next=function(e){this.parent.notifyNext(e)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(u),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(u);function b(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[o]}(e))return function(e,t){return new c((function(n){var r=new s;return r.add(t.schedule((function(){var i=e[o]();r.add(i.subscribe({next:function(e){r.add(t.schedule((function(){return n.next(e)})))},error:function(e){r.add(t.schedule((function(){return n.error(e)})))},complete:function(){r.add(t.schedule((function(){return n.complete()})))}}))}))),r}))}(e,t);if(d(e))return function(e,t){return new c((function(n){var r=new s;return r.add(t.schedule((function(){return e.then((function(e){r.add(t.schedule((function(){n.next(e),r.add(t.schedule((function(){return n.complete()})))})))}),(function(e){r.add(t.schedule((function(){return n.error(e)})))}))}))),r}))}(e,t);if(l(e))return function(e,t){return new c((function(n){var r=new s,o=0;return r.add(t.schedule((function(){o!==e.length?(n.next(e[o++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}(e,t);if(function(e){return e&&"function"==typeof e[f]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new c((function(n){var r,o=new s;return o.add((function(){r&&"function"==typeof r.return&&r.return()})),o.add(t.schedule((function(){r=e[f](),o.add(t.schedule((function(){if(!n.closed){var e,t;try{var o=r.next();e=o.value,t=o.done}catch(e){return void n.error(e)}t?n.complete():(n.next(e),this.schedule())}})))}))),o}))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}function m(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof t?function(r){return r.pipe(m((function(n,r){return(o=e(n,r),i?b(o,i):o instanceof c?o:new c(p(o))).pipe(a((function(e,o){return t(n,e,r,o)})));var o,i}),n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new v(e,n))})}var v=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new w(e,this.project,this.concurrent))},e}(),w=function(e){function t(t,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var o=e.call(this,t)||this;return o.project=n,o.concurrent=r,o.hasCompleted=!1,o.buffer=[],o.active=0,o.index=0,o}return n(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t)},t.prototype._innerSub=function(e){var t=new h(this),n=this.destination;n.add(t);var r=function(e,t){if(!t.closed)return e instanceof c?e.subscribe(t):p(e)(t)}(e,t);r!==t&&n.add(r)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(y);const x=document.querySelector("#error-login-authenticator"),_=document.querySelector("#error-login-authenticator-message"),S=document.querySelector("#error-webauthn-message"),I=document.querySelector("#button-icon"),T=document.querySelector("#button-label"),g=document.querySelector("#start-enrollment"),E=document.querySelector("#stop-enrollment");let N,j;window.addEventListener("load",(()=>{k(),q(),O(),P()}));const k=()=>{x.style.display="none",_.style.display="none",_.innerText="",S.style.display="none"},q=()=>{I.innerText="fingerprint",T.innerText="Start Enrollment"},C=()=>{I.innerText="exit_to_app",T.innerText="Skip Enrollment"},O=()=>{E.addEventListener("click",(()=>{k(),E.checked?C():q()}))},P=()=>{g.addEventListener("click",(()=>{k(),g.disabled=!0,E.disabled=!0,N&&N.unsubscribe(),j&&j.unsubscribe(),E.checked?t.import("./_api-e1537e09.min.js").then((({api:e})=>{N=e.loggedIn().pipe(m((t=>e.patchUser(t.userId,{skip_authenticator_registration:!0})))).subscribe((()=>{N.unsubscribe(),window.location.href="/end"}),(e=>Y(e,N)))})):t.import("./_webauthn-62022b65.min.js").then((({webAuthn:e})=>{e.supported?t.import("./_api-e1537e09.min.js").then((({api:e})=>{j=e.patchSession({key:"previous_step",value:"login_authenticator"}).subscribe((()=>{j.unsubscribe(),window.location.href="/webauthn/authenticator"}),(e=>Y(e,j)))})):(x.style.display="flex",_.style.display="none",_.innerText="",S.style.display="inline",setTimeout((()=>(C(),g.disabled=!1,void(E.checked=!0))),500))}))}))},Y=(e,t)=>{if(401===e.status)t&&t.unsubscribe(),window.location.href="/error";else{const t=[].concat(e.message).shift();n=t,x.style.display="flex",_.style.display="inline",_.innerText=n,S.style.display="none",setTimeout((()=>(g.disabled=!1,void(E.disabled=!1))),500)}var n}}}}));
