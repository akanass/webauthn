System.register(["./tslib.es6-4c758cbf.min.js","./map-ecca50c7.min.js","./from-a8c881b3.min.js","./Observable-a79d76be.min.js"],(function(t){"use strict";var n,e,i,r,o,s;return{setters:[function(t){n=t._},function(t){e=t.m},function(t){i=t.s,r=t.f},function(t){o=t.S,s=t.O}],execute:function(){t("m",(function t(n,i,o){void 0===o&&(o=Number.POSITIVE_INFINITY);if("function"==typeof i)return function(s){return s.pipe(t((function(t,o){return r(n(t,o)).pipe(e((function(n,e){return i(t,n,o,e)})))}),o))};"number"==typeof i&&(o=i);return function(t){return t.lift(new f(n,o))}}));var c=function(t){function e(n){var e=t.call(this)||this;return e.parent=n,e}return n(e,t),e.prototype._next=function(t){this.parent.notifyNext(t)},e.prototype._error=function(t){this.parent.notifyError(t),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},e}(o),u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.notifyNext=function(t){this.destination.next(t)},e.prototype.notifyError=function(t){this.destination.error(t)},e.prototype.notifyComplete=function(){this.destination.complete()},e}(o);var f=function(){function t(t,n){void 0===n&&(n=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=n}return t.prototype.call=function(t,n){return n.subscribe(new p(t,this.project,this.concurrent))},t}(),p=function(t){function e(n,e,i){void 0===i&&(i=Number.POSITIVE_INFINITY);var r=t.call(this,n)||this;return r.project=e,r.concurrent=i,r.hasCompleted=!1,r.buffer=[],r.active=0,r.index=0,r}return n(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var n,e=this.index++;try{n=this.project(t,e)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(n)},e.prototype._innerSub=function(t){var n=new c(this),e=this.destination;e.add(n);var r=function(t,n){if(!n.closed)return t instanceof s?t.subscribe(n):i(t)(n)}(t,n);r!==n&&e.add(r)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t){this.destination.next(t)},e.prototype.notifyComplete=function(){var t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(u)}}}));
