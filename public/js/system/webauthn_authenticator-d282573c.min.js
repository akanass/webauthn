System.register(["./tslib.es6-2105f430.min.js","./map-cfeb7eca.min.js","./mergeMap-6e5445a4.min.js"],(function(t,e){"use strict";var r,i,s,n;return{setters:[function(t){r=t.a},function(t){i=t.b,s=t.S},function(t){n=t.m}],execute:function(){function t(){}var o=function(){function t(t,e,r){this.nextOrObserver=t,this.error=e,this.complete=r}return t.prototype.call=function(t,e){return e.subscribe(new a(t,this.nextOrObserver,this.error,this.complete))},t}(),a=function(e){function s(r,s,n,o){var a=e.call(this,r)||this;return a._tapNext=t,a._tapError=t,a._tapComplete=t,a._tapError=n||t,a._tapComplete=o||t,i(s)?(a._context=a,a._tapNext=s):s&&(a._context=s,a._tapNext=s.next||t,a._tapError=s.error||t,a._tapComplete=s.complete||t),a}return r(s,e),s.prototype._next=function(t){try{this._tapNext.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.next(t)},s.prototype._error=function(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)},s.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()},s}(s);const c=document.querySelector("#error-authenticators-list"),l=document.querySelector("#error-authenticators-list-message"),u=document.querySelector("#error-webauthn-message"),d=document.querySelector("#authenticators-tab-bar"),m=document.querySelector("#security-keys"),p=document.querySelector("#security-keys-list"),h=document.querySelector("#biometrics"),y=document.querySelector("#biometrics-list"),b=document.querySelector("#add-security-key"),v=document.querySelector("#add-biometric");let f;window.addEventListener("load",(()=>{g()}));const _=()=>{c.style.display="none",l.style.display="none",l.innerText="",u.style.display="none"},x=t=>{c.style.display="flex",l.style.display="inline",l.innerText=t,u.style.display="none"},S=t=>v.disabled=t,q=t=>b.disabled=t,L=t=>{S(t),q(t)},g=()=>{_(),L(!0),f&&f.unsubscribe(),e.import("./_api-17a88781.min.js").then((({api:t})=>{var e,r,i;f=t.loggedIn().pipe((e=t=>t,function(t){return t.lift(new o(e,r,i))}),n((e=>t.getCredentialsList(e.userId)))).subscribe((t=>{f.unsubscribe(),E(t),d.addEventListener("MDCTabBar:activated",(t=>{switch(_(),t.detail.index){case 0:m.classList.add("authenticators-list--active"),h.classList.remove("authenticators-list--active");break;case 1:m.classList.remove("authenticators-list--active"),h.classList.add("authenticators-list--active");break;default:m.classList.remove("authenticators-list--active"),h.classList.remove("authenticators-list--active"),x("Authenticators list can't be displayed")}})),q(!1)}),(t=>C(t,f)))}))},w=(t,r)=>{e.import("./_template-19382272.min.js").then((({template:e})=>t.innerHTML=e.generateCredentialsList(r)))},E=t=>{w(p,t.securityKeys),w(y,t.biometrics),S(!t.addBiometricsButtonIsEnabled),setTimeout((()=>{[].map.call(document.querySelectorAll(".edit-authenticator"),(t=>{t.addEventListener("click",(()=>{var e;_();const r=null===(e=t.dataset)||void 0===e?void 0:e.authenticatorid;console.log(r)}))}))}),100)},C=(t,e,r)=>{if(401===t.status)e&&e.unsubscribe(),window.location.href="/error";else{const e=[].concat(t.message).shift();x(e);const i=!!r&&void 0!==r.add,s=!!r&&void 0!==r.edit;(i||s)&&setTimeout((()=>{var t;i&&L(!r.add),s&&(t=!r.edit,[].map.call(document.querySelectorAll(".edit-authenticator"),(e=>e.disabled=t)))}),500)}}}}}));
